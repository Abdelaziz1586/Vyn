blueprint Link do
    make next
    make value
end

blueprint LinkList do
    make head

    task isEmpty do
        reply head == nothing
    end

    task insertLast takes value do
        check head == nothing do
            make head new Link
            make head.value value
        otherwise
            make copy head
            cycle while copy.next != nothing do
                make copy copy.next
            end

            make copy.next new Link
            make copy copy.next
            make copy.value value
        end
    end

    task insertFirst takes value do
        check head == nothing do
            make head new Link
            make head.value value
        otherwise
            make newHead new Link
            make newHead.next head
            make newHead.value value

            make head newHead
        end
    end

    task getHead do
        reply head
    end

    task get takes index do
        make copy head

        cycle i from 1 to index do
            check copy == nothing do
                reply null
            end

            make copy copy.next
        end

        reply copy
    end

    task removeFirst do
        check head == nothing do
            reply nothing
        end

        make copy head

		make head copy.next

        reply copy
    end

    task removeLast do
    	check head == nothing do
       		reply nothing
       	end

       	make copy head
       	cycle while copy.next != nothing do
       		make copy copy.next
       	end

       	make returned copy.next

       	make copy.next nothing

       	reply returned
    end

	task size do
		make size 0
		make copy head

		cycle while copy != nothing do
			make size size + 1

			make copy copy.next
		end

		reply size
	end

    task print do
        write "{"
        make copy head
        cycle while copy != nothing do
            write copy.value
            check copy.next != nothing do
                write ", "
            end
            make copy copy.next
        end

        write "}"
    end
end

blueprint Stack do
    make l new LinkList

    task push takes value do
        l.insertFirst(value)
    end

    task pop do
    	make temp l.removeFirst()
    	check temp == nothing do
    		reply nothing
    	end

		reply temp.value
    end

    task isEmpty do
    	reply l.isEmpty()
    end

    task size do
    	reply l.size()
    end
end

blueprint Queue do
	make l new LinkList

	task enqueue takes value do
		l.insertLast(value)
	end

	task dequeue do
		make temp l.removeFirst()
        check temp == nothing do
          	reply nothing
        end

        reply temp.value
	end

	task isEmpty do
        reply l.isEmpty()
    end

	task size do
	   	reply l.size()
    end
end

make s new Stack

s.push(1)
s.push(2)

say s.pop()
say s.pop()
say s.pop()

make q new Queue

q.enqueue(1)
q.enqueue(2)

say "Size: " + q.size()

say q.dequeue()
say q.dequeue()